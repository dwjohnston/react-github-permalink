"use strict";(self.webpackChunkreact_github_permalink=self.webpackChunkreact_github_permalink||[]).push([[813],{"./src/library/GithubPermalink/GithubPermlinkRsc.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,Basic2:()=>Basic2,Erroring:()=>Erroring,LineExclusions:()=>LineExclusions,__namedExportsOrder:()=>__namedExportsOrder,default:()=>GithubPermlinkRsc_stories});var export_namespaceObject={};__webpack_require__.r(export_namespaceObject);var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),defaultFunctions=__webpack_require__("./src/library/config/defaultFunctions.ts");const defaultConfiguration={getDataFn:defaultFunctions.Bj,getIssueFn:defaultFunctions.Nw};const githubPermalinkRscConfig=new class GithubPermalinkRscConfig{setConfig(options){this.baseConfiguration={...defaultConfiguration,...null!=options?options:{}}}getPermalinkFn(){return this.baseConfiguration.getDataFn}getIssueFn(){return this.baseConfiguration.getIssueFn}getGithubToken(){return this.baseConfiguration.githubToken}getOnError(){return this.baseConfiguration.onError}constructor(){this.baseConfiguration=defaultConfiguration}};var GithubPermalinkBase=__webpack_require__("./src/library/GithubPermalink/GithubPermalinkBase.tsx");async function GithubPermalinkRsc(props){const{permalink}=props,dataFn=githubPermalinkRscConfig.getPermalinkFn(),token=githubPermalinkRscConfig.getGithubToken(),onError=githubPermalinkRscConfig.getOnError(),data=await dataFn(permalink,token,onError);return(0,jsx_runtime.jsx)(GithubPermalinkBase.I,{data,...props})}try{GithubPermalinkRsc.displayName="GithubPermalinkRsc",GithubPermalinkRsc.__docgenInfo={description:"",displayName:"GithubPermalinkRsc",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},permalink:{defaultValue:null,description:"",name:"permalink",required:!0,type:{name:"string"}},excludeLines:{defaultValue:null,description:"",name:"excludeLines",required:!1,type:{name:"[from: number, to: number][]"}},excludeText:{defaultValue:null,description:"",name:"excludeText",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/library/GithubPermalink/GithubPermalinkRsc.tsx#GithubPermalinkRsc"]={docgenInfo:GithubPermalinkRsc.__docgenInfo,name:"GithubPermalinkRsc",path:"src/library/GithubPermalink/GithubPermalinkRsc.tsx#GithubPermalinkRsc"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./src/library/GithubPermalink/GithubPermalink.tsx"),__webpack_require__("./src/library/GithubIssueLink/GithubIssueLink.tsx"),__webpack_require__("./src/library/GithubIssueLink/GithubIssueLinkBase.tsx"),__webpack_require__("./src/library/config/GithubPermalinkContext.tsx");const GithubPermlinkRsc_stories={component:GithubPermalinkRsc},Basic={args:{permalink:"https://github.com/dwjohnston/react-github-permalink/blob/5b15aa07e60af4e317086f391b28cadf9aae8e1b/sample_files/sample1.go#L1-L5"}},LineExclusions={args:{permalink:"https://github.com/dwjohnston/react-github-permalink/blob/5b15aa07e60af4e317086f391b28cadf9aae8e1b/sample_files/sample1.go#L1-L5",excludeLines:[[2,4]]}},Erroring={loaders:()=>{export_namespaceObject.githubPermalinkRscConfig.setConfig({getDataFn:async()=>({status:"other-error"})})},args:{permalink:"https://github.com/dwjohnston/react-github-permalink/blob/5b15aa07e60af4e317086f391b28cadf9aae8e1b/sample_files/sample1.go#L1-L5"}},Basic2={loaders:()=>{export_namespaceObject.githubPermalinkRscConfig.setConfig({getDataFn:defaultFunctions.Bj})},args:{permalink:"https://github.com/dwjohnston/react-github-permalink/blob/5b15aa07e60af4e317086f391b28cadf9aae8e1b/sample_files/sample1.go#L1-L5"}},__namedExportsOrder=["Basic","LineExclusions","Erroring","Basic2"];Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:'{\n  args: {\n    permalink: "https://github.com/dwjohnston/react-github-permalink/blob/5b15aa07e60af4e317086f391b28cadf9aae8e1b/sample_files/sample1.go#L1-L5"\n  }\n}',...Basic.parameters?.docs?.source}}},LineExclusions.parameters={...LineExclusions.parameters,docs:{...LineExclusions.parameters?.docs,source:{originalSource:'{\n  args: {\n    permalink: "https://github.com/dwjohnston/react-github-permalink/blob/5b15aa07e60af4e317086f391b28cadf9aae8e1b/sample_files/sample1.go#L1-L5",\n    excludeLines: [[2, 4]]\n  }\n}',...LineExclusions.parameters?.docs?.source}}},Erroring.parameters={...Erroring.parameters,docs:{...Erroring.parameters?.docs,source:{originalSource:'{\n  loaders: () => {\n    githubPermalinkRscConfig.setConfig({\n      getDataFn: async () => {\n        return {\n          status: "other-error"\n        };\n      }\n    });\n  },\n  args: {\n    permalink: "https://github.com/dwjohnston/react-github-permalink/blob/5b15aa07e60af4e317086f391b28cadf9aae8e1b/sample_files/sample1.go#L1-L5"\n  }\n}',...Erroring.parameters?.docs?.source}}},Basic2.parameters={...Basic2.parameters,docs:{...Basic2.parameters?.docs,source:{originalSource:'{\n  loaders: () => {\n    githubPermalinkRscConfig.setConfig({\n      getDataFn: defaultGetPermalinkFn\n    });\n  },\n  args: {\n    permalink: "https://github.com/dwjohnston/react-github-permalink/blob/5b15aa07e60af4e317086f391b28cadf9aae8e1b/sample_files/sample1.go#L1-L5"\n  }\n}',...Basic2.parameters?.docs?.source},description:{story:"The purpose of this story is to demonstrate the behaviour of storybook, as it relates to the loaders function and our configuring of the Rsc global config",...Basic2.parameters?.docs?.description}}};try{Basic2.displayName="Basic2",Basic2.__docgenInfo={description:"The purpose of this story is to demonstrate the behaviour of storybook, as it relates to the loaders function and our configuring of the Rsc global config",displayName:"Basic2",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/library/GithubPermalink/GithubPermlinkRsc.stories.tsx#Basic2"]={docgenInfo:Basic2.__docgenInfo,name:"Basic2",path:"src/library/GithubPermalink/GithubPermlinkRsc.stories.tsx#Basic2"})}catch(__react_docgen_typescript_loader_error){}},"./src/library/ErrorMessages/ErrorMessages.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>ErrorMessages});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js");function ErrorMessages(props){const data=props.data;return"404"===data.status?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("p",{className:"error",children:"Github returned an HTTP status 404. Is this a private Github repo?"})}):"rate-limit"===data.status?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("p",{className:"error",children:"You have encountered Github's unauthenticated API request rate limit. You can still visit the above link to see the code snippet."})}):"unauthorized"===data.status?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("p",{className:"error",children:"Unauthorized. Is your Github token valid?"})}):"other-error"===data.status?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("p",{className:"error",children:"An unknown error occurred."})}):function exhaustiveFailure(value){throw new Error("Exhaustive failure.")}()}try{ErrorMessages.displayName="ErrorMessages",ErrorMessages.__docgenInfo={description:"",displayName:"ErrorMessages",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ErrorResponses"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/library/ErrorMessages/ErrorMessages.tsx#ErrorMessages"]={docgenInfo:ErrorMessages.__docgenInfo,name:"ErrorMessages",path:"src/library/ErrorMessages/ErrorMessages.tsx#ErrorMessages"})}catch(__react_docgen_typescript_loader_error){}},"./src/library/GithubIssueLink/GithubIssueLink.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>GithubIssueLink});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_config_GithubPermalinkContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/library/config/GithubPermalinkContext.tsx"),_GithubIssueLinkBase__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/library/GithubIssueLink/GithubIssueLinkBase.tsx");function GithubIssueLink(props){const{issueLink}=props,[data,setData]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),{getIssueFn,githubToken,onError}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_config_GithubPermalinkContext__WEBPACK_IMPORTED_MODULE_2__.C),[isLoading,setIsLoading]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!0);if((0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{getIssueFn(issueLink,githubToken,onError).then((v=>{setIsLoading(!1),setData(v)}))}),[getIssueFn,githubToken,issueLink,onError]),isLoading)return null;if(!data)throw new Error("Loading is complete, but no data was returned.");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_GithubIssueLinkBase__WEBPACK_IMPORTED_MODULE_3__.e,{...props,data})}try{GithubIssueLink.displayName="GithubIssueLink",GithubIssueLink.__docgenInfo={description:"",displayName:"GithubIssueLink",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},issueLink:{defaultValue:null,description:"",name:"issueLink",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"inline"'},{value:'"block"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/library/GithubIssueLink/GithubIssueLink.tsx#GithubIssueLink"]={docgenInfo:GithubIssueLink.__docgenInfo,name:"GithubIssueLink",path:"src/library/GithubIssueLink/GithubIssueLink.tsx#GithubIssueLink"})}catch(__react_docgen_typescript_loader_error){}},"./src/library/GithubIssueLink/GithubIssueLinkBase.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>GithubIssueLinkBase});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),GithubSvg=__webpack_require__("./src/library/GithubSvg/GithubSvg.tsx"),ErrorMessages=__webpack_require__("./src/library/ErrorMessages/ErrorMessages.tsx");const REACTIONS_MAP={"+1":"ðŸ‘","-1":"ðŸ‘Ž",confused:"ðŸ˜•",eyes:"ðŸ‘€",heart:"â¤ï¸",hooray:"ðŸŽ‰",laugh:"ðŸ˜†",rocket:"ðŸš€"};function Reactions(props){return(0,jsx_runtime.jsx)("div",{className:"reaction-bar",children:Object.entries(props.reactions).map((v=>{const[key,value]=v;if(0===value||"total_count"===key)return null;const emoji=REACTIONS_MAP[key];return emoji?(0,jsx_runtime.jsxs)("div",{className:"reaction-value",children:[(0,jsx_runtime.jsx)("span",{children:emoji}),(0,jsx_runtime.jsx)("span",{children:value})]},key):null}))})}try{Reactions.displayName="Reactions",Reactions.__docgenInfo={description:"",displayName:"Reactions",props:{reactions:{defaultValue:null,description:"",name:"reactions",required:!0,type:{name:'{ "+1": number; "-1": number; confused: number; eyes: number; heart: number; hooray: number; laugh: number; rocket: number; total_count: number; }'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/library/common/Reactions/Reactions.tsx#Reactions"]={docgenInfo:Reactions.__docgenInfo,name:"Reactions",path:"src/library/common/Reactions/Reactions.tsx#Reactions"})}catch(__react_docgen_typescript_loader_error){}function Inline(props){const{href,text}=props;return(0,jsx_runtime.jsxs)("a",{href,className:"rgp-base react-github-issue-link-inline",children:[(0,jsx_runtime.jsx)(GithubSvg.Y,{})," ",(0,jsx_runtime.jsx)("span",{children:text})]})}try{Inline.displayName="Inline",Inline.__docgenInfo={description:"",displayName:"Inline",props:{href:{defaultValue:null,description:"",name:"href",required:!0,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/library/common/Inline/Inline.tsx#Inline"]={docgenInfo:Inline.__docgenInfo,name:"Inline",path:"src/library/common/Inline/Inline.tsx#Inline"})}catch(__react_docgen_typescript_loader_error){}function GithubIssueLinkBase(props){const{data,variant="block",issueLink}=props;return"inline"===variant?"ok"===data.status?(0,jsx_runtime.jsx)(Inline,{href:issueLink,text:`${data.owner}/${data.repo}#${data.issueNumber}  ${data.issueTitle}`}):(0,jsx_runtime.jsx)(Inline,{href:issueLink,text:issueLink}):"ok"===data.status?(0,jsx_runtime.jsx)(GithubIssueLinkInner,{...props,header:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"react-github-issuelink-repo",children:[(0,jsx_runtime.jsx)(GithubSvg.Y,{}),(0,jsx_runtime.jsxs)("p",{children:[data.owner,"/",data.repo]})]}),(0,jsx_runtime.jsxs)("div",{className:"react-github-issuelink-body",children:[(0,jsx_runtime.jsxs)("p",{children:[(0,jsx_runtime.jsx)("span",{className:"react-github-issuelink-title",children:data.issueTitle}),(0,jsx_runtime.jsxs)("span",{className:"react-github-issuelink-number",children:[" #",data.issueNumber]})," "]}),"open"===data.issueState?(0,jsx_runtime.jsxs)("div",{className:"react-github-issuelink-status open",children:[(0,jsx_runtime.jsxs)("svg",{"aria-hidden":"true",height:"12",viewBox:"0 0 16 16",version:"1.1",width:"12","data-view-component":"true",children:[(0,jsx_runtime.jsx)("path",{d:"M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"}),(0,jsx_runtime.jsx)("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"})]}),(0,jsx_runtime.jsx)("span",{children:" Open"})]}):(0,jsx_runtime.jsxs)("div",{className:"react-github-issuelink-status closed",children:[(0,jsx_runtime.jsxs)("svg",{"aria-hidden":"true",height:"12",viewBox:"0 0 16 16",version:"1.1",width:"12","data-view-component":"true",children:[(0,jsx_runtime.jsx)("path",{d:"M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z"}),(0,jsx_runtime.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"})]}),(0,jsx_runtime.jsx)("span",{children:" Closed"})]})]}),(0,jsx_runtime.jsx)("div",{children:data.reactions&&(0,jsx_runtime.jsx)(Reactions,{reactions:data.reactions})})]})}):(0,jsx_runtime.jsx)(GithubIssueLinkInner,{...props,children:(0,jsx_runtime.jsx)(ErrorMessages.f,{data})})}function GithubIssueLinkInner(props){const{issueLink,className=""}=props;var _props_header;return(0,jsx_runtime.jsx)("div",{className:`rgp-base react-github-issuelink ${className}`,children:(0,jsx_runtime.jsxs)("a",{href:issueLink,children:[(0,jsx_runtime.jsx)("div",{className:"header",children:null!==(_props_header=props.header)&&void 0!==_props_header?_props_header:(0,jsx_runtime.jsx)("a",{href:issueLink,className:"file-link",children:issueLink})}),props.children]})})}try{GithubIssueLinkBase.displayName="GithubIssueLinkBase",GithubIssueLinkBase.__docgenInfo={description:"",displayName:"GithubIssueLinkBase",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},issueLink:{defaultValue:null,description:"",name:"issueLink",required:!0,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GithubIssueLinkDataResponse"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"inline"'},{value:'"block"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/library/GithubIssueLink/GithubIssueLinkBase.tsx#GithubIssueLinkBase"]={docgenInfo:GithubIssueLinkBase.__docgenInfo,name:"GithubIssueLinkBase",path:"src/library/GithubIssueLink/GithubIssueLinkBase.tsx#GithubIssueLinkBase"})}catch(__react_docgen_typescript_loader_error){}},"./src/library/GithubPermalink/GithubPermalink.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>GithubPermalink});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_config_GithubPermalinkContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/library/config/GithubPermalinkContext.tsx"),_GithubPermalinkBase__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/library/GithubPermalink/GithubPermalinkBase.tsx");function GithubPermalink(props){const{permalink}=props,[data,setData]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),{getDataFn,githubToken,onError}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_config_GithubPermalinkContext__WEBPACK_IMPORTED_MODULE_2__.C),[isLoading,setIsLoading]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!0);if((0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{getDataFn(permalink,githubToken,onError).then((v=>{setIsLoading(!1),setData(v)}))}),[getDataFn,githubToken,onError,permalink]),isLoading)return null;if(!data)throw new Error("Loading is complete, but no data was returned.");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_GithubPermalinkBase__WEBPACK_IMPORTED_MODULE_3__.I,{data,...props})}try{GithubPermalink.displayName="GithubPermalink",GithubPermalink.__docgenInfo={description:"",displayName:"GithubPermalink",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},permalink:{defaultValue:null,description:"",name:"permalink",required:!0,type:{name:"string"}},excludeLines:{defaultValue:null,description:"",name:"excludeLines",required:!1,type:{name:"[from: number, to: number][]"}},excludeText:{defaultValue:null,description:"",name:"excludeText",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/library/GithubPermalink/GithubPermalink.tsx#GithubPermalink"]={docgenInfo:GithubPermalink.__docgenInfo,name:"GithubPermalink",path:"src/library/GithubPermalink/GithubPermalink.tsx#GithubPermalink"})}catch(__react_docgen_typescript_loader_error){}},"./src/library/GithubPermalink/GithubPermalinkBase.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>GithubPermalinkBase});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),ErrorMessages=__webpack_require__("./src/library/ErrorMessages/ErrorMessages.tsx"),GithubSvg=__webpack_require__("./src/library/GithubSvg/GithubSvg.tsx"),default_highlight=__webpack_require__("./node_modules/react-syntax-highlighter/dist/esm/default-highlight.js"),hljs=__webpack_require__("./node_modules/react-syntax-highlighter/dist/cjs/styles/hljs/index.js"),esm=__webpack_require__("./node_modules/react-responsive/dist/esm/index.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const noTheme={hljs:{display:"block",overflowX:"auto",padding:"0.5em",color:"inherit",background:"inherit"},"hljs-comment":{color:"inherit",fontStyle:"italic"},"hljs-quote":{color:"inherit",fontStyle:"italic"},"hljs-keyword":{color:"inherit",fontWeight:"bold"},"hljs-selector-tag":{color:"inherit",fontWeight:"bold"},"hljs-subst":{color:"inherit",fontWeight:"normal"},"hljs-number":{color:"inherit"},"hljs-literal":{color:"inherit"},"hljs-variable":{color:"inherit"},"hljs-template-variable":{color:"inherit"},"hljs-tag .hljs-attr":{color:"inherit"},"hljs-string":{color:"inherit"},"hljs-doctag":{color:"inherit"},"hljs-title":{color:"inherit",fontWeight:"bold"},"hljs-section":{color:"inherit",fontWeight:"bold"},"hljs-selector-id":{color:"inherit",fontWeight:"bold"},"hljs-type":{color:"inherit",fontWeight:"bold"},"hljs-class .hljs-title":{color:"inherit",fontWeight:"bold"},"hljs-tag":{color:"inherit",fontWeight:"normal"},"hljs-name":{color:"inherit",fontWeight:"normal"},"hljs-attribute":{color:"inherit",fontWeight:"normal"},"hljs-regexp":{color:"inherit"},"hljs-link":{color:"inherit"},"hljs-symbol":{color:"inherit"},"hljs-bullet":{color:"inherit"},"hljs-built_in":{color:"inherit"},"hljs-builtin-name":{color:"inherit"},"hljs-meta":{color:"inherit",fontWeight:"bold"},"hljs-deletion":{background:"inherit"},"hljs-addition":{background:"inherit"},"hljs-emphasis":{fontStyle:"italic"},"hljs-strong":{fontWeight:"bold"}};function SyntaxHighlight(props){const{startingLineNumber,text,className}=props,isDarkMode=(0,esm.Ub)({query:"(prefers-color-scheme: dark)"}),[ready,setReady]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{setReady(!0)}),[]),(0,jsx_runtime.jsx)(default_highlight.A,{className,style:ready?isDarkMode?hljs.sb:hljs.M:noTheme,language:"javascript",showLineNumbers:void 0!==startingLineNumber,startingLineNumber,children:text})}try{SyntaxHighlight.displayName="SyntaxHighlight",SyntaxHighlight.__docgenInfo={description:"",displayName:"SyntaxHighlight",props:{text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},startingLineNumber:{defaultValue:null,description:"",name:"startingLineNumber",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/library/SyntaxHighlight/SyntaxHighlight.tsx#SyntaxHighlight"]={docgenInfo:SyntaxHighlight.__docgenInfo,name:"SyntaxHighlight",path:"src/library/SyntaxHighlight/SyntaxHighlight.tsx#SyntaxHighlight"})}catch(__react_docgen_typescript_loader_error){}function CopySvg(){return(0,jsx_runtime.jsxs)("svg",{viewBox:"0 0 16 16",width:"16",height:"16",style:{display:"inline-block",userSelect:"none",verticalAlign:"text-bottom",overflow:"visible"},children:[(0,jsx_runtime.jsx)("path",{d:"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"}),(0,jsx_runtime.jsx)("path",{d:"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"})]})}function TickSvg(){return(0,jsx_runtime.jsx)("svg",{"aria-hidden":"true",height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16",style:{display:"inline-block",userSelect:"none",verticalAlign:"text-bottom",overflow:"visible"},children:(0,jsx_runtime.jsx)("path",{d:"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"})})}function CopyButton(props){const{clipboard}=props,idCopy=(0,react.useId)(),idCopied=(0,react.useId)(),copyRef=(0,react.useRef)(null),copiedRef=(0,react.useRef)(null),[isClicked,setIsClicked]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{const timeout=setTimeout((()=>{var _copiedRef_current;setIsClicked(!1),null===(_copiedRef_current=copiedRef.current)||void 0===_copiedRef_current||_copiedRef_current.hidePopover()}),2e3);return()=>{clearTimeout(timeout)}}),[isClicked]),(0,jsx_runtime.jsxs)("div",{className:"tooltip-container",children:[(0,jsx_runtime.jsx)("div",{className:"tooltip-target",id:idCopy,popover:"auto",ref:copyRef}),(0,jsx_runtime.jsx)("div",{className:"tooltip-content",children:"Copy snippet"}),(0,jsx_runtime.jsx)("div",{className:"tooltip-target",id:idCopied,popover:"auto",ref:copiedRef}),(0,jsx_runtime.jsx)("div",{className:"tooltip-content",children:"Copied!"}),(0,jsx_runtime.jsx)("button",{className:isClicked?"clicked":"not-clicked",onMouseEnter:()=>{var _copyRef_current;isClicked||(null===(_copyRef_current=copyRef.current)||void 0===_copyRef_current||_copyRef_current.showPopover())},onMouseLeave:()=>{var _copyRef_current;null===(_copyRef_current=copyRef.current)||void 0===_copyRef_current||_copyRef_current.hidePopover()},popoverTarget:idCopied,title:"Copy snippet",onClick:()=>{navigator.clipboard.writeText(clipboard),setIsClicked(!0)},children:isClicked?(0,jsx_runtime.jsx)(TickSvg,{}):(0,jsx_runtime.jsx)(CopySvg,{})})]})}try{CopyButton.displayName="CopyButton",CopyButton.__docgenInfo={description:"",displayName:"CopyButton",props:{clipboard:{defaultValue:null,description:"",name:"clipboard",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/library/common/CopyButton/CopyButton.tsx#CopyButton"]={docgenInfo:CopyButton.__docgenInfo,name:"CopyButton",path:"src/library/common/CopyButton/CopyButton.tsx#CopyButton"})}catch(__react_docgen_typescript_loader_error){}function GithubPermalinkBase(props){const{data,permalink,excludeLines,excludeText="<snip>"}=props;if("ok"===data.status){const formatedLineExclusions=function formatForLineExclusions(input,exclusions=[]){const result=[];let currentLine=input.lineFrom;for(const exclusion of exclusions){const[exclusionFrom,exclusionTo]=exclusion;currentLine<exclusionFrom&&result.push({from:currentLine,to:exclusionFrom-1,isExclude:!1,lines:input.lines.slice(currentLine-input.lineFrom,exclusionFrom-input.lineFrom)}),result.push({from:exclusionFrom,to:exclusionTo,isExclude:!0}),currentLine=exclusionTo+1}return currentLine<=input.lineTo&&result.push({from:currentLine,to:input.lineTo,isExclude:!1,lines:input.lines.slice(currentLine-input.lineFrom,input.lineTo-input.lineFrom+1)}),result}(data,excludeLines),clipboard=formatedLineExclusions.reduce(((acc,cur)=>cur.isExclude?acc+"\n":acc+"\n"+cur.lines.join("\n")),"");return(0,jsx_runtime.jsx)(GithubPermalinkInner,{...props,clipboard,header:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("a",{href:permalink,className:"file-link",children:`${data.owner}/${data.repo}/${data.path}`}),(0,jsx_runtime.jsxs)("p",{children:[data.lineFrom===data.lineTo?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Line ",data.lineFrom]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Lines ",data.lineFrom," to ",data.lineTo]})," in ",(0,jsx_runtime.jsx)("a",{className:"commit-link",href:data.commitUrl,children:data.commit.slice(0,7)})]})]}),children:formatedLineExclusions.map((v=>v.isExclude?(0,jsx_runtime.jsx)(SyntaxHighlight,{className:"hide-line-numbers",text:excludeText,startingLineNumber:v.from},v.from):(0,jsx_runtime.jsx)(SyntaxHighlight,{text:v.lines.join("\n"),startingLineNumber:v.from},v.from)))})}return(0,jsx_runtime.jsx)(GithubPermalinkInner,{...props,children:(0,jsx_runtime.jsx)(ErrorMessages.f,{data})})}function GithubPermalinkInner(props){const{clipboard}=props;var _props_className,_props_header;return(0,jsx_runtime.jsxs)("div",{className:`rgp-base react-github-permalink ${null!==(_props_className=props.className)&&void 0!==_props_className?_props_className:""}`,children:[(0,jsx_runtime.jsxs)("div",{className:"header",children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(GithubSvg.Y,{})}),(0,jsx_runtime.jsx)("div",{className:"link-wrapper",children:null!==(_props_header=props.header)&&void 0!==_props_header?_props_header:(0,jsx_runtime.jsx)("a",{href:props.permalink,className:"file-link",children:props.permalink})}),clipboard&&(0,jsx_runtime.jsx)("div",{className:"copy-button-container",children:(0,jsx_runtime.jsx)(CopyButton,{clipboard})})]}),props.children]})}try{GithubPermalinkBase.displayName="GithubPermalinkBase",GithubPermalinkBase.__docgenInfo={description:"",displayName:"GithubPermalinkBase",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},permalink:{defaultValue:null,description:"",name:"permalink",required:!0,type:{name:"string"}},excludeLines:{defaultValue:null,description:"",name:"excludeLines",required:!1,type:{name:"[from: number, to: number][]"}},excludeText:{defaultValue:null,description:"",name:"excludeText",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GithubPermalinkDataResponse"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/library/GithubPermalink/GithubPermalinkBase.tsx#GithubPermalinkBase"]={docgenInfo:GithubPermalinkBase.__docgenInfo,name:"GithubPermalinkBase",path:"src/library/GithubPermalink/GithubPermalinkBase.tsx#GithubPermalinkBase"})}catch(__react_docgen_typescript_loader_error){}},"./src/library/GithubSvg/GithubSvg.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>GithubSvg});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js");function GithubSvg(props){var _props_size;const size=null!==(_props_size=props.size)&&void 0!==_props_size?_props_size:16;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg",{className:"github-logo",height:`${size}`,width:`${size}`,"aria-hidden":"true",viewBox:"0 0 16 16",version:"1.1",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path",{d:"M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"})})}try{GithubSvg.displayName="GithubSvg",GithubSvg.__docgenInfo={description:"",displayName:"GithubSvg",props:{size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/library/GithubSvg/GithubSvg.tsx#GithubSvg"]={docgenInfo:GithubSvg.__docgenInfo,name:"GithubSvg",path:"src/library/GithubSvg/GithubSvg.tsx#GithubSvg"})}catch(__react_docgen_typescript_loader_error){}},"./src/library/config/GithubPermalinkContext.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>GithubPermalinkContext,W:()=>GithubPermalinkProvider});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_defaultFunctions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/library/config/defaultFunctions.ts");const GithubPermalinkContext=(0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({getDataFn:_defaultFunctions__WEBPACK_IMPORTED_MODULE_2__.Bj,getIssueFn:_defaultFunctions__WEBPACK_IMPORTED_MODULE_2__.Nw});function GithubPermalinkProvider(props){var _props_getDataFn,_props_getIssueFn;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(GithubPermalinkContext.Provider,{value:{getDataFn:null!==(_props_getDataFn=props.getDataFn)&&void 0!==_props_getDataFn?_props_getDataFn:_defaultFunctions__WEBPACK_IMPORTED_MODULE_2__.Bj,getIssueFn:null!==(_props_getIssueFn=props.getIssueFn)&&void 0!==_props_getIssueFn?_props_getIssueFn:_defaultFunctions__WEBPACK_IMPORTED_MODULE_2__.Nw,githubToken:props.githubToken,onError:props.onError},children:props.children})}try{GithubPermalinkProvider.displayName="GithubPermalinkProvider",GithubPermalinkProvider.__docgenInfo={description:"",displayName:"GithubPermalinkProvider",props:{getDataFn:{defaultValue:null,description:"Function to provide permalink data payload",name:"getDataFn",required:!1,type:{name:"((permalink: string, githubToken?: string, onError?: ((err: unknown) => void)) => Promise<GithubPermalinkDataResponse>) | undefined"}},getIssueFn:{defaultValue:null,description:"Function to provide issue data payload",name:"getIssueFn",required:!1,type:{name:"((issueLink: string, githubToken?: string, onError?: ((err: unknown) => void)) => Promise<GithubIssueLinkDataResponse>) | undefined"}},githubToken:{defaultValue:null,description:"A github personal access token - will be passed to the data fetching functions",name:"githubToken",required:!1,type:{name:"string"}},onError:{defaultValue:null,description:"If an error occurs while fetching the data this function will be called. \nYou can use this to report to Sentry etc\n@param e\n@returns",name:"onError",required:!1,type:{name:"((e: unknown) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/library/config/GithubPermalinkContext.tsx#GithubPermalinkProvider"]={docgenInfo:GithubPermalinkProvider.__docgenInfo,name:"GithubPermalinkProvider",path:"src/library/config/GithubPermalinkContext.tsx#GithubPermalinkProvider"})}catch(__react_docgen_typescript_loader_error){}},"./src/library/config/defaultFunctions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{async function defaultGetIssueFn(issueLink,githubToken,onError){const config=function parseGithubIssueLink(url){const match=url.match(/^https?:\/\/github\.com\/([^/]+)\/([^/]+)\/(?:issues|pull)\/(\d+)$/);if(match){const[,owner,repo,issue]=match;return{owner,repo,issue}}throw new Error("Invalid issue link URL")}(issueLink),options=githubToken?{headers:{Authorization:`Bearer ${githubToken}`}}:void 0,issueResult=await fetch(`https://api.github.com/repos/${config.owner}/${config.repo}/issues/${config.issue}`,options);if(!issueResult.ok)return null==onError||onError(issueResult),handleResponse(issueResult);const issueJson=await issueResult.json();return{issueTitle:issueJson.title,issueNumber:config.issue,issueState:issueJson.state,status:"ok",owner:config.owner,repo:config.repo,reactions:issueJson.reactions}}async function defaultGetPermalinkFn(permalink,githubToken,onError){const config=function parseGithubPermalinkUrl(githubURL){const match=githubURL.match(/https:\/\/github\.com\/([^/]+)\/([^/]+)\/blob\/([^/]+)\/(.+)#L(\d+)(?:-L(\d+))?/);if(match){const[,owner,repo,commit,path,lineFrom,lineTo]=match;return{owner,repo,commit,path,lineFrom:parseInt(lineFrom,10),lineTo:lineTo?parseInt(lineTo,10):parseInt(lineFrom,10)}}throw new Error("Invalid permalink URL")}(permalink),options=githubToken?{headers:{Authorization:`Bearer ${githubToken}`}}:void 0,contentPromise=fetch(`https://api.github.com/repos/${config.owner}/${config.repo}/contents/${config.path}?ref=${config.commit}`,options),commitPromise=fetch(`https://api.github.com/repos/${config.owner}/${config.repo}/commits/${config.commit}`,options),[contentResult,commitResult]=await Promise.all([contentPromise,commitPromise]);if(!contentResult.ok)return null==onError||onError(contentResult),handleResponse(contentResult);if(!commitResult.ok)return null==onError||onError(commitResult),handleResponse(commitResult);const[contentJson,commitJson]=await Promise.all([contentResult.json(),commitResult.json()]);return{lines:atob(contentJson.content).split("\n").slice(config.lineFrom-1,config.lineTo),lineFrom:config.lineFrom,lineTo:config.lineTo,commit:config.commit,path:config.path,owner:config.owner,repo:config.repo,commitUrl:commitJson.html_url,status:"ok"}}function handleResponse(response){return 404===response.status?{status:"404"}:403===response.status&&"0"===response.headers.get("X-Ratelimit-Remaining")?{status:"rate-limit"}:401===response.status?{status:"unauthorized"}:{status:"other-error"}}__webpack_require__.d(__webpack_exports__,{Nw:()=>defaultGetIssueFn,Bj:()=>defaultGetPermalinkFn})}}]);